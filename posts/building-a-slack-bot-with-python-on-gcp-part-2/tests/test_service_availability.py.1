import requests
import logging

logger = logging.getLogger(__name__)

service_cloud_url = "https://valet-parking-slack-bot-n2mj5hiwyq-lz.a.run.app" 

def test_cloud_endpoint():
    test_url = f"{service_cloud_url}/test/healthcheck"

    response = requests.get(test_url)
    
    assert response.ok
    data = response.json()
    assert data["message"] == "I'm alive!"
    assert data["ts"]
    logger.info(f"requested {test_url}, got {str(data)}")
